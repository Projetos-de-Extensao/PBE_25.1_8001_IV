{% extends "base.html" %}
{% block content %}
<div style="max-width: 420px; margin: 0 auto;">
    <h2>Delivery #{{ delivery.id }}</h2>
    <div><strong>Status:</strong> {{ delivery.delivery_status|capfirst }}</div>
    <div><strong>Price:</strong> ${{ delivery.payment_request.price }}</div>
    <div><strong>Weight:</strong> {{ delivery.payment_request.weight }} kg</div>
    <div><strong>Vendor:</strong> {{ delivery.payment_request.vendor.empresa_nome }}</div>
    <div><strong>Address:</strong> {{ delivery.delivery_address }}</div>
    <form method="post">
        {% csrf_token %}
        {% if delivery.delivery_status == 'pending' and delivery.payment_request.status == 'pending' %}
            <button type="submit" name="pay">Pay Seller</button>
            <button type="submit" name="cancel" style="background:#f44336;">Cancel Delivery</button>
        {% elif delivery.delivery_status == 'in_progress' %}
            <button type="submit" name="confirm" style="background:#4caf50;">Confirm Delivery</button>
        {% elif delivery.delivery_status == 'delivered' %}
            <div class="message">Delivery confirmed. Thank you!</div>
        {% elif delivery.delivery_status == 'cancelled' or delivery.payment_request.status == 'cancelled' %}
            <div class="error">This delivery has been cancelled.</div>
        {% endif %}
    </form>
</div>
{% endblock %}